<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base Template</title>
    <link rel="stylesheet" href="../static/style_home.css">
</head>
<body>
    <script>
      async function checkLoginStatus() {
        try {
            const response = await fetch('/api/logged_in', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const data = await response.json();

            const loginContainer = document.getElementById('login-container');
            if (data.logged_in) {
                // If logged in, show Logout option
                loginContainer.innerHTML = `
                    <a href="/logout" class="login-link">
                        <img src="../static/Pictures/Account-icon.png" alt="Account Icon" class="login-image">
                        <span class="login-text"><u>Logout</u></span>
                    </a>
                `;
            } else {
                // If not logged in, show Login option
                loginContainer.innerHTML = `
                    <a href="/login" class="login-link">
                        <img src="../static/Pictures/Account-icon.png" alt="Account Icon" class="login-image">
                        <span class="login-text"><u>Login</u></span>
                    </a>
                `;
            }
        } catch (error) {
            console.error('Error fetching login status:', error);
        }
    }

      // Call this function on page load
      document.addEventListener('DOMContentLoaded', checkLoginStatus);
      // Recheck login status when going back in history (browser back button)
      window.addEventListener('popstate', checkLoginStatus);
    </script>
    <header>
        <!-- Navbar with links -->
        <div class="logo">
            <button class="logo-btn" alt="Fitness Studio Logo" onclick="location.href='/';"></button>
        </div>

        <nav class="navbar">
            <a href="/"><u>Home</u></a>
            <a href="/calendar"><u>Calendar</u></a>
            <a href="/enrollments"><u>Enrollments</u></a>
            <a href="/payments"><u>Payments</u></a>
            <a href="/profile"><u>Profile Settings</u></a>
        </nav>

        <div class="login" id="login-container">
            <!-- Dynamic login/logout links will be inserted here by JS -->
        </div>

    </header>
    {% block content %}
    <!-- Page-specific content will go here -->
    {% endblock %}

</body>
</html>
